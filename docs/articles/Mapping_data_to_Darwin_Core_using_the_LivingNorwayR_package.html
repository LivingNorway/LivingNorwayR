<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="LivingNorwayR">
<title>Mapping data to Darwin Core using the LivingNorwayR package • LivingNorwayR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Mapping data to Darwin Core using the LivingNorwayR package">
<meta property="og:description" content="LivingNorwayR">
<meta property="og:image" content="https://livingnorway.github.io/LivingNorwayR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">LivingNorwayR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/EML_R_packages_overview.html">EML R package overview</a>
    <a class="dropdown-item" href="../articles/LNWorkshopExample_TOV-E.html">Handling Darwin Core Files With Living Norway:  Example Using the TOV-E Dataset</a>
    <a class="dropdown-item" href="../articles/LNWorkshopExample_TOV-E_Metadata.html">LNWorkshopExample_TOV-E_Metadata</a>
    <a class="dropdown-item" href="../articles/Mapping_data_to_Darwin_Core_using_the_LivingNorwayR_package.html">Mapping data to Darwin Core using the LivingNorwayR package</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/LivingNorway/LivingNorwayR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="Mapping_data_to_Darwin_Core_using_the_LivingNorwayR_package_files/kePrint-0.0.1/kePrint.js"></script><link href="Mapping_data_to_Darwin_Core_using_the_LivingNorwayR_package_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Mapping data to Darwin Core using the LivingNorwayR package</h1>
            <h3 data-toc-skip class="subtitle">Part 1</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/LivingNorway/LivingNorwayR/blob/HEAD/vignettes/Mapping_data_to_Darwin_Core_using_the_LivingNorwayR_package.Rmd" class="external-link"><code>vignettes/Mapping_data_to_Darwin_Core_using_the_LivingNorwayR_package.Rmd</code></a></small>
      <div class="d-none name"><code>Mapping_data_to_Darwin_Core_using_the_LivingNorwayR_package.Rmd</code></div>
    </div>

    
    
<p>{LivingNorwayR} (<span class="citation">Chipperfield, Grainger, and
Nilsen (2022)</span>) is our newly developed R (<span class="citation">R
Core Team (2020)</span>) package that allows the user to create a Darwin
Core Standard (<a href="https://dwc.tdwg.org/" class="external-link uri">https://dwc.tdwg.org/</a>) compliant data archive (“a data
package”) for their biodiversity data.</p>
<p>We assume that the reader knows something about the Darwin Core
Standards (a very basic understanding is okay). Have a look at our
vignette <a href="https://livingnorway.github.io/LivingNorwayR/articles/LNWorkshopExample_TOV-E.html">“Handling
Darwin Core Files With Living Norway: Example Using the TOV-E
Dataset”</a> for a good overview.</p>
<p>Here we will run through an example of how to map biodiversity data
to the Darwin Core terms using {LivingNorwayR}.</p>
<div class="section level2">
<h2 id="load-the-packages-we-need">Load the packages we need<a class="anchor" aria-label="anchor" href="#load-the-packages-we-need"></a>
</h2>
<p>As {LivingNorwayR} is still in development (although now firmly in
the testing stage of development) we need to install it from GitHub. You
can do this using the following code.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list.of.packages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tidyverse"</span>, <span class="st">"devtools"</span>, <span class="st">"uuid"</span><span class="op">)</span></span>
<span><span class="va">new.packages</span> <span class="op">&lt;-</span> <span class="va">list.of.packages</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="va">list.of.packages</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span>,<span class="st">"Package"</span><span class="op">]</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">new.packages</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">new.packages</span><span class="op">)</span></span>
<span><span class="co">################################</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"LivingNorway/LivingNorwayR"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/LivingNorway/LivingNorwayR" class="external-link">LivingNorwayR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">palmerpenguins</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-data">The data<a class="anchor" aria-label="anchor" href="#the-data"></a>
</h2>
<p>Let’s use a well-known and openly available dataset from R; The
Palmer Penguins dataset (<span class="citation">Horst, Hill, and Gorman
(2020)</span>).</p>
<p>This dataset consists of observations and measurements of three
different species of penguin in Antarctica [Artwork by Allison
Horst].</p>
<p><img src="images/penguins.png" alt="The three species of penguin.Artwork by (allison_horst?)"> We can
have a quick look at the dataset.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">&lt;-</span><span class="fu">palmerpenguins</span><span class="fu">::</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/reference/penguins_raw.html" class="external-link">penguins_raw</a></span></span>
<span></span>
<span><span class="co">#clean the column names</span></span>
<span><span class="va">penguin_data</span><span class="op">&lt;-</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span><span class="st">"striped"</span>, full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span> <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html" class="external-link">scroll_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"800px"</span>, height <span class="op">=</span> <span class="st">"200px"</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:800px; ">
<table class="table table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
study_name
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
sample_number
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
species
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
region
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
island
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
stage
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
individual_id
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
clutch_completion
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
date_egg
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
culmen_length_mm
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
culmen_depth_mm
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
flipper_length_mm
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
body_mass_g
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
sex
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
delta_15_n_o_oo
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
delta_13_c_o_oo
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
comments
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
PAL0708
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Adelie Penguin (Pygoscelis adeliae)
</td>
<td style="text-align:left;">
Anvers
</td>
<td style="text-align:left;">
Torgersen
</td>
<td style="text-align:left;">
Adult, 1 Egg Stage
</td>
<td style="text-align:left;">
N1A1
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
2007-11-11
</td>
<td style="text-align:right;">
39.1
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;">
181
</td>
<td style="text-align:right;">
3750
</td>
<td style="text-align:left;">
MALE
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
Not enough blood for isotopes.
</td>
</tr>
<tr>
<td style="text-align:left;">
PAL0708
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Adelie Penguin (Pygoscelis adeliae)
</td>
<td style="text-align:left;">
Anvers
</td>
<td style="text-align:left;">
Torgersen
</td>
<td style="text-align:left;">
Adult, 1 Egg Stage
</td>
<td style="text-align:left;">
N1A2
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
2007-11-11
</td>
<td style="text-align:right;">
39.5
</td>
<td style="text-align:right;">
17.4
</td>
<td style="text-align:right;">
186
</td>
<td style="text-align:right;">
3800
</td>
<td style="text-align:left;">
FEMALE
</td>
<td style="text-align:right;">
8.94956
</td>
<td style="text-align:right;">
-24.69454
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
PAL0708
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Adelie Penguin (Pygoscelis adeliae)
</td>
<td style="text-align:left;">
Anvers
</td>
<td style="text-align:left;">
Torgersen
</td>
<td style="text-align:left;">
Adult, 1 Egg Stage
</td>
<td style="text-align:left;">
N2A1
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
2007-11-16
</td>
<td style="text-align:right;">
40.3
</td>
<td style="text-align:right;">
18.0
</td>
<td style="text-align:right;">
195
</td>
<td style="text-align:right;">
3250
</td>
<td style="text-align:left;">
FEMALE
</td>
<td style="text-align:right;">
8.36821
</td>
<td style="text-align:right;">
-25.33302
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
PAL0708
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Adelie Penguin (Pygoscelis adeliae)
</td>
<td style="text-align:left;">
Anvers
</td>
<td style="text-align:left;">
Torgersen
</td>
<td style="text-align:left;">
Adult, 1 Egg Stage
</td>
<td style="text-align:left;">
N2A2
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
2007-11-16
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
Adult not sampled.
</td>
</tr>
<tr>
<td style="text-align:left;">
PAL0708
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Adelie Penguin (Pygoscelis adeliae)
</td>
<td style="text-align:left;">
Anvers
</td>
<td style="text-align:left;">
Torgersen
</td>
<td style="text-align:left;">
Adult, 1 Egg Stage
</td>
<td style="text-align:left;">
N3A1
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
2007-11-16
</td>
<td style="text-align:right;">
36.7
</td>
<td style="text-align:right;">
19.3
</td>
<td style="text-align:right;">
193
</td>
<td style="text-align:right;">
3450
</td>
<td style="text-align:left;">
FEMALE
</td>
<td style="text-align:right;">
8.76651
</td>
<td style="text-align:right;">
-25.32426
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
PAL0708
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Adelie Penguin (Pygoscelis adeliae)
</td>
<td style="text-align:left;">
Anvers
</td>
<td style="text-align:left;">
Torgersen
</td>
<td style="text-align:left;">
Adult, 1 Egg Stage
</td>
<td style="text-align:left;">
N3A2
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
2007-11-16
</td>
<td style="text-align:right;">
39.3
</td>
<td style="text-align:right;">
20.6
</td>
<td style="text-align:right;">
190
</td>
<td style="text-align:right;">
3650
</td>
<td style="text-align:left;">
MALE
</td>
<td style="text-align:right;">
8.66496
</td>
<td style="text-align:right;">
-25.29805
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<p>Each row is a single individual penguin of one of the three species.
There are measures of body size (bill and flipper lengths), sex (male or
female), as well as information on egg laying date and stable isotope
analysis from blood samples.</p>
<div class="float">
<img src="images/culmen_depth.png" alt="Bill length and depth measurements for each penguin.Artwork by Allison Horst"><div class="figcaption">Bill length and depth measurements for each
penguin.Artwork by Allison Horst</div>
</div>
</div>
<div class="section level2">
<h2 id="mapping-to-darwin-core">Mapping to Darwin Core<a class="anchor" aria-label="anchor" href="#mapping-to-darwin-core"></a>
</h2>
<div class="section level3">
<h3 id="deciding-on-the-core">
<em>Deciding on the Core</em><a class="anchor" aria-label="anchor" href="#deciding-on-the-core"></a>
</h3>
<p>The first task is to decide how our data will be structured. We need
to decide what class of file will be our core data file in the Darwin
Core Archive. {LivingNorwayR} can give us a list of the potential core
classes that could best describe our data.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">LivingNorwayR</span><span class="fu">::</span><span class="fu"><a href="../reference/getGBIFCoreClasses.html">getGBIFCoreClasses</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $GBIFEvent</span></span>
<span><span class="co">#&gt; http://rs.tdwg.org/dwc/terms/Event - Event</span></span>
<span><span class="co">#&gt; An action that occurs at some location during some time.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://rs.tdwg.org/dwc/terms/Event</span></span>
<span><span class="co">#&gt;  Version IRI: http://rs.tdwg.org/dwc/terms/version/Event-2018-09-06</span></span>
<span><span class="co">#&gt;  Type: Class</span></span>
<span><span class="co">#&gt;  Date modified: 2018-09-06</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2014-10-26_15</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      A specimen collection process. A camera trap image capture.  A marine trawl.</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      DataSets/DataSet/Units/Unit/Gathering</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GBIFOccurrence</span></span>
<span><span class="co">#&gt; http://rs.tdwg.org/dwc/terms/Occurrence - Occurrence</span></span>
<span><span class="co">#&gt; An existence of an Organism (sensu http://rs.tdwg.org/dwc/terms/Organism) at a particular place at a particular time.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://rs.tdwg.org/dwc/terms/Occurrence</span></span>
<span><span class="co">#&gt;  Version IRI: http://rs.tdwg.org/dwc/terms/version/Occurrence-2020-08-20</span></span>
<span><span class="co">#&gt;  Type: Class</span></span>
<span><span class="co">#&gt;  Date modified: 2020-08-20</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2014-10-26_15</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      A wolf pack on the shore of Kluane Lake in 1988. A virus in a plant leaf in the New York Botanical Garden at 15:29 on 2014-10-23. A fungus in Central Park in the summer of 1929.</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      DataSets/DataSet/Units/Unit</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GBIFTaxon</span></span>
<span><span class="co">#&gt; http://rs.tdwg.org/dwc/terms/Taxon - Taxon</span></span>
<span><span class="co">#&gt; A group of organisms (sensu http://purl.obolibrary.org/obo/OBI_0100026) considered by taxonomists to form a homogeneous unit.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://rs.tdwg.org/dwc/terms/Taxon</span></span>
<span><span class="co">#&gt;  Version IRI: http://rs.tdwg.org/dwc/terms/version/Taxon-2018-09-06</span></span>
<span><span class="co">#&gt;  Type: Class</span></span>
<span><span class="co">#&gt;  Date modified: 2018-09-06</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2014-10-26_15</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      The genus Truncorotaloides as published by Brönnimann et al. in 1953 in the Journal of Paleontology Vol. 27(6) p. 817-820.</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      no simple equivalent in ABCD</span></span></code></pre></div>
<p>The choice of which table should be the core table depends on how
much information the data contains and also how the data owner wishes to
share the data. There can be several different ways to structure the
Darwin Core Archive that are still valid.</p>
<p>As each of the rows represents a sampling event we can use the Event
table as our core.</p>
<p><em>Deciding on the extensions</em></p>
<p>We have species data for each Event and we can include an Occurrence
table as an extension.</p>
<p>We can get a list of the other extension classes that are supported
by GBIF using the following code:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">LivingNorwayR</span><span class="fu">::</span><span class="fu"><a href="../reference/getGBIFExtensionClasses.html">getGBIFExtensionClasses</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span> <span class="co"># Truncated</span></span>
<span><span class="co">#&gt; $GBIFMultimedia</span></span>
<span><span class="co">#&gt; http://rs.tdwg.org/ac/terms/Multimedia - Multimedia</span></span>
<span><span class="co">#&gt; The Audubon Core is a set of vocabularies designed to represent metadata for biodiversity multimedia resources and collections. These vocabularies aim to represent information that will help to determine whether a particular resource or collection will be fit for some particular biodiversity science application before acquiring the media. Among others, the vocabularies address such concerns as the management of the media and collections, descriptions of their content, their taxonomic, geographic, and temporal coverage, and the appropriate ways to retrieve, attribute and reproduce them.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  IRI: http://rs.tdwg.org/ac/terms/Multimedia</span></span>
<span><span class="co">#&gt;  Version IRI: http://rs.tdwg.org/ac/terms/Multimedia</span></span>
<span><span class="co">#&gt;  Type: class</span></span>
<span><span class="co">#&gt;  Date modified: 2015-03-19</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      The Audubon Core is a set of vocabularies designed to represent metadata for biodiversity multimedia resources and collections. These vocabularies aim to represent information that will help to determine whether a particular resource or collection will be fit for some particular biodiversity science application before acquiring the media. Among others, the vocabularies address such concerns as the management of the media and collections, descriptions of their content, their taxonomic, geographic, and temporal coverage, and the appropriate ways to retrieve, attribute and reproduce them.</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      GBIF core/extension class</span></span>
<span><span class="co">#&gt;  Vocabulary URI:</span></span>
<span><span class="co">#&gt;      http://terms.tdwg.org/wiki/Audubon_Core_Term_List</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GBIFChronometricAge</span></span>
<span><span class="co">#&gt; http://rs.tdwg.org/chrono/terms/ChronometricAge - ChronometricAge</span></span>
<span><span class="co">#&gt; Extension to Occurrence Core to capture chronometric age information to be used only in cases where the collecting event is not contemporaneous with the time when the dwc:Organism was alive in its context. Collection event information can be reported in dwc:eventDate. See also the normative term list document at https://tdwg.github.io/chrono/list/ and the human-friendly Quick Reference Guide at https://tdwg.github.io/chrono/terms/.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  IRI: http://rs.tdwg.org/chrono/terms/ChronometricAge</span></span>
<span><span class="co">#&gt;  Version IRI: http://rs.tdwg.org/chrono/terms/ChronometricAge</span></span>
<span><span class="co">#&gt;  Type: class</span></span>
<span><span class="co">#&gt;  Date modified: 2021-03-27</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      Extension to Occurrence Core to capture chronometric age information to be used only in cases where the collecting event is not contemporaneous with the time when the dwc:Organism was alive in its context. Collection event information can be reported in dwc:eventDate. See also the normative term list document at https://tdwg.github.io/chrono/list/ and the human-friendly Quick Reference Guide at https://tdwg.github.io/chrono/terms/.</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      GBIF core/extension class</span></span>
<span><span class="co">#&gt;  Vocabulary URI:</span></span>
<span><span class="co">#&gt;      https://github.com/tdwg/chrono/blob/master/vocabulary/term_versions.csv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GBIFIdentification</span></span>
<span><span class="co">#&gt; http://rs.tdwg.org/dwc/terms/Identification - Identification</span></span>
<span><span class="co">#&gt; A taxonomic determination (e.g., the assignment to a taxon).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://rs.tdwg.org/dwc/terms/Identification</span></span>
<span><span class="co">#&gt;  Version IRI: http://rs.tdwg.org/dwc/terms/version/Identification-2018-09-06</span></span>
<span><span class="co">#&gt;  Type: Class</span></span>
<span><span class="co">#&gt;  Date modified: 2018-09-06</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2014-10-26_15</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      A subspecies determination of an organism.</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      DataSets/DataSet/Units/Unit/Identifications/Identification</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GBIFMeasurementOrFact</span></span>
<span><span class="co">#&gt; http://rs.tdwg.org/dwc/terms/MeasurementOrFact - Measurement or Fact</span></span>
<span><span class="co">#&gt; A measurement of or fact about an rdfs:Resource (http://www.w3.org/2000/01/rdf-schema#Resource).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://rs.tdwg.org/dwc/terms/MeasurementOrFact</span></span>
<span><span class="co">#&gt;  Version IRI: http://rs.tdwg.org/dwc/terms/version/MeasurementOrFact-2018-09-06</span></span>
<span><span class="co">#&gt;  Type: Class</span></span>
<span><span class="co">#&gt;  Date modified: 2018-09-06</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      Resources can be thought of as identifiable records or instances of classes and may include, but need not be limited to dwc:Occurrence, dwc:Organism, dwc:MaterialSample, dwc:Event, dwc:Location, dwc:GeologicalContext, dwc:Identification, or dwc:Taxon.</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2014-10-26_15</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      The weight of an organism in grams. The number of placental scars. Surface water temperature in Celsius.</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      Datasets/Dataset/Units/Unit/MeasurementsOrFacts or DataSets/DataSet/Units/Unit/Gathering/SiteMeasurementsOrFacts</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GBIFResourceRelationship</span></span>
<span><span class="co">#&gt; http://rs.tdwg.org/dwc/terms/ResourceRelationship - Resource Relationship</span></span>
<span><span class="co">#&gt; A relationship of one rdfs:Resource (http://www.w3.org/2000/01/rdf-schema#Resource) to another.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://rs.tdwg.org/dwc/terms/ResourceRelationship</span></span>
<span><span class="co">#&gt;  Version IRI: http://rs.tdwg.org/dwc/terms/version/ResourceRelationship-2018-09-06</span></span>
<span><span class="co">#&gt;  Type: Class</span></span>
<span><span class="co">#&gt;  Date modified: 2018-09-06</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      Resources can be thought of as identifiable records or instances of classes and may include, but need not be limited to dwc:Occurrence, dwc:Organism, dwc:MaterialSample, dwc:Event, dwc:Location, dwc:GeologicalContext, dwc:Identification, or dwc:Taxon.</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2014-10-26_15</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      An instance of an Organism is the mother of another instance of an Organism. A uniquely identified Occurrence represents the same Occurrence as another uniquely identified Occurrence. A MaterialSample is a subsample of another MaterialSample.</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      DataSets/DataSet/Units/Unit/Associations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $GBIFEOLMediaExtension</span></span>
<span><span class="co">#&gt; http://www.eol.org/schema/transfer#/EOLMediaExtension - EOLMediaExtension</span></span>
<span><span class="co">#&gt; This extension draws from Audubon Core, Dublin Core and others to gather information about text and multimedia. It was designed to contain all the metadata that is required to be indexed by the Encyclopedia of Life (EOL), but this extension is hopefully general enough to be useful to all text and media providers and consumers. The original extension was offline; this is a copy recovered from the Internet Archive.  The issue date is estimated.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  IRI: http://eol.org/schema/media/Document</span></span>
<span><span class="co">#&gt;  Version IRI: http://eol.org/schema/media/Document</span></span>
<span><span class="co">#&gt;  Type: class</span></span>
<span><span class="co">#&gt;  Date modified: 2010-01-01</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      This extension draws from Audubon Core, Dublin Core and others to gather information about text and multimedia. It was designed to contain all the metadata that is required to be indexed by the Encyclopedia of Life (EOL), but this extension is hopefully general enough to be useful to all text and media providers and consumers. The original extension was offline; this is a copy recovered from the Internet Archive.  The issue date is estimated.</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      GBIF core/extension class</span></span>
<span><span class="co">#&gt;  Vocabulary URI:</span></span>
<span><span class="co">#&gt;      http://eol.org/info/cp_archives</span></span></code></pre></div>
<p>From this list the other extension class we could consider including
in our Darwin Core Archive is the Measurement Or Fact table. This will
hold information about the measurements taken.</p>
</div>
</div>
<div class="section level2">
<h2 id="the-event-core">The Event Core<a class="anchor" aria-label="anchor" href="#the-event-core"></a>
</h2>
<p>We can get a list of the terms associated with an Event by using this
code:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/getGBIFEventMembers.html">getGBIFEventMembers</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span> <span class="co"># Truncated</span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/type`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/type - Type (DEPRECATED)</span></span>
<span><span class="co">#&gt; The nature or genre of the resource.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/type</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2008-01-14</span></span>
<span><span class="co">#&gt;  Is replaced by: http://purl.org/dc/elements/1.1/type</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      To provide a string literal value for type, use dc:type rather than this term. In accordance with the Darwin Core RDF guide, rdf:type should be used instead of this term to indicate an IRI value for type.</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2009-12-07_1</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2019-12-01_19</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2019-12-01_20</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      This term is deprecated and should no longer be used.</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/modified`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/modified - Date Modified</span></span>
<span><span class="co">#&gt; The most recent date-time on which the resource was changed.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/modified</span></span>
<span><span class="co">#&gt;  Version IRI: http://dublincore.org/usage/terms/history/#modified-003</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2020-08-12</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      Recommended best practice is to use a date that conforms to ISO 8601-1:2019.</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2019-12-01_19</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      1963-03-08T14:07-0600 (8 Mar 1963 at 2:07pm in the time zone six hours earlier than UTC). 2009-02-20T08:40Z (20 February 2009 8:40am UTC). 2018-08-29T15:19 (3:19pm local time on 29 August 2018). 1809-02-12 (some time during 12 February 1809). 1906-06 (some time in June 1906). 1971 (some time in the year 1971). 2007-03-01T13:00:00Z/2008-05-11T15:30:00Z (some time during the interval between 1 March 2007 1pm UTC and 11 May 2008 3:30pm UTC). 1900/1909 (some time during the interval between the beginning of the year 1900 and the end of the year 1909). 2007-11-13/15 (some time in the interval between 13 November 2007 and 15 November 2007).</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/language`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/language - Language</span></span>
<span><span class="co">#&gt; A language of the resource.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/language</span></span>
<span><span class="co">#&gt;  Version IRI: http://dublincore.org/usage/terms/history/#languageT-001</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2008-01-14</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      Recommended best practice is to use an IRI from the Library of Congress ISO 639-2 scheme http://id.loc.gov/vocabulary/iso639-2</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2019-12-01_19</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/license`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/license - License</span></span>
<span><span class="co">#&gt; A legal document giving official permission to do something with the resource.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/license</span></span>
<span><span class="co">#&gt;  Version IRI: http://dublincore.org/usage/terms/history/#license-002</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2008-01-14</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2014-11-06_17</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      http://creativecommons.org/publicdomain/zero/1.0/legalcode, http://creativecommons.org/licenses/by/4.0/legalcode</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/rightsHolder`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/rightsHolder - Rights Holder</span></span>
<span><span class="co">#&gt; A person or organization owning or managing rights over the resource.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/rightsHolder</span></span>
<span><span class="co">#&gt;  Version IRI: http://dublincore.org/usage/terms/history/#rightsHolder-002</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2008-01-14</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      The Regents of the University of California</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/accessRights`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/accessRights - Access Rights</span></span>
<span><span class="co">#&gt; Information about who can access the resource or an indication of its security status.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/accessRights</span></span>
<span><span class="co">#&gt;  Version IRI: http://dublincore.org/usage/terms/history/#accessRights-002</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2008-01-14</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      Access Rights may include information regarding access or restrictions based on privacy, security, or other policies.</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      not-for-profit use only, https://www.fieldmuseum.org/field-museum-natural-history-conditions-and-suggested-norms-use-collections-data-and-images</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span></code></pre></div>
<p>From the above list of Event Members we can select those that are
most relevant for our dataset. <em>We do not have to use them all!</em>
GBIF recommends some required and suggested terms for Events here (<a href="https://www.gbif.org/data-quality-requirements-sampling-events" class="external-link uri">https://www.gbif.org/data-quality-requirements-sampling-events</a>).
These include <strong>eventID</strong>, <strong>eventDate</strong>,
<strong>samplingProtocol</strong>, <strong>samplingSizeValue</strong>
and <strong>samplingSizeUnit</strong> as required. Some of the strongly
recommended elements that it makes sense for us to include are
<strong>parentEventID</strong>, <strong>countryCode</strong>,
<strong>locationID</strong> <strong>decimalLatitude</strong>,
<strong>decimalLongitude</strong>, <strong>geodeticDatum</strong> and
<strong>coordinateUncertaintyInMeters</strong>. We can also add
<strong>type</strong>,<strong>datasetName</strong>,
<strong>ownerInstitutionCode</strong>, <strong>country</strong>,
<strong>year</strong>, <strong>month</strong> and
<strong>day</strong>.</p>
<div class="section level3">
<h3 id="parent-events">
<em>Parent Events</em><a class="anchor" aria-label="anchor" href="#parent-events"></a>
</h3>
<p>Each event is a part of a higher level Event which is referred to as
a Parent Event. The Parent Event in our case is represented by the
“studyName” column. This represents a unique expedition carried out at a
separate time. We can include this information in the Event table.</p>
<p>The Parent Events are three different expeditions in different
years.</p>
<p>Each Parent Event needs a unique persistent identifier,
<strong>parentEventID</strong>, which we can obtain from the {uuid}
package (<span class="citation">Urbanek and Ts’o (2021)</span>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">study_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    parentEventID <span class="op">=</span> <span class="fu">uuid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/uuid/man/UUIDgenerate.html" class="external-link">UUIDgenerate</a></span><span class="op">(</span>use.time <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>There are different date ranges for each parent event and these need
to be added as an <strong>eventDate</strong>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Event Date for parentIDs</span></span>
<span></span>
<span><span class="va">parent_penguinEvent</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">parentEventID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>min<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">date_egg</span><span class="op">)</span>, max<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">date_egg</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eventDate<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">min</span>,<span class="st">"/"</span>, <span class="va">max</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eventID<span class="op">=</span><span class="va">parentEventID</span><span class="op">)</span></span></code></pre></div>
<p>We can also add some wider scale geographic information to the parent
events. Such as <strong>continent</strong> and
<strong>islandGroup</strong>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Event continent and islandGroup for parentIDs</span></span>
<span><span class="va">parent_penguinEvent</span><span class="op">=</span><span class="va">parent_penguinEvent</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>continent<span class="op">=</span><span class="st">"Antarctica"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>islandGroup<span class="op">=</span><span class="st">"Palmer Archipelago"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">min</span>,<span class="va">max</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="event">
<em>Event</em><a class="anchor" aria-label="anchor" href="#event"></a>
</h3>
<p>Let’s start with the <strong>type</strong>,
<strong>datasetName</strong> and <strong>ownerInstitutionCode</strong>.
The <strong>type</strong> is “Event”, the <strong>datasetName</strong>
is “Palmer-penguins” and the Palmer Station Antarctica LTER
<strong>ownerInstitutionCode</strong> is “PAL”.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ownerInstitutionCode<span class="op">=</span><span class="st">"PAL"</span>,</span>
<span>         type<span class="op">=</span><span class="st">"Event"</span>,</span>
<span>         datasetName<span class="op">=</span><span class="st">"Palmer-penguins"</span><span class="op">)</span></span></code></pre></div>
<p>Each Event also needs a unique identifier (<strong>eventID</strong>)
and we can use the same approach as above. This time as each row is an
Event we need to make sure the dataframe is ungrouped.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    eventID <span class="op">=</span> <span class="fu">uuid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/uuid/man/UUIDgenerate.html" class="external-link">UUIDgenerate</a></span><span class="op">(</span>use.time <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Again we can include an <strong>eventDate</strong> for each event.
For the penguins data we do not have a true date of the sampling event,
but we do have a egg laying date and we shall use this for illustrative
purposes. We can also extract the day, month and year information at the
same time.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    eventDate <span class="op">=</span> <span class="va">date_egg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>day<span class="op">=</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html" class="external-link">day</a></span><span class="op">(</span><span class="va">date_egg</span><span class="op">)</span>,</span>
<span>         month<span class="op">=</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/month.html" class="external-link">month</a></span><span class="op">(</span><span class="va">date_egg</span><span class="op">)</span>,</span>
<span>         year<span class="op">=</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">date_egg</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>As each event is a sample in the penguins dataset where they measured
a individual penguin we can set the <strong>sampleSizeValue</strong> as
1. The <strong>sampleSizeUnit</strong> can be “Adult penguin”.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sampleSizeValue<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sampleSizeUnit<span class="op">=</span><span class="st">"Adult penguin"</span><span class="op">)</span></span></code></pre></div>
<p>We can get the <strong>samplingProtocol</strong> for each event by
looking at the original data package (links can be found when you type
??palmerpenguins::penguins_raw in to the R Console). All three parent
events have the same protocol.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>samplingProtocol<span class="op">=</span> <span class="st">"Each season, study nests, where pairs of adults were present, were individually marked and chosen before the onset of egg-laying, and consistently monitored. When study nests were found at the one-egg stage, both adults were captured to obtain blood samples used for molecular sexing and stable isotope analyses, and measurements of structural size and body mass. At the time of capture, each adult penguin was quickly blood sampled (~1 ml) from the brachial vein using a sterile 3 ml syringe and heparinized infusion needle. Collected blood was stored in 1.5 ml micro-centrifuge tubes that were kept cool. In the field, a small amount of whole blood was smeared on clean filter paper stored in a 1.5 ml micro-centrifuge tube for molecular sexing. Measurements of culmen length and depth (using dial calipers ± 0.1 mm), right flipper (using a ruler ± 1 mm), and body mass (using 5 kg ± 25 g or 10 kg ± 50 g Pesola spring scales and a weigh bag) were obtained to quantify body size variation. After handling, individuals at study nests were further monitored to ensure the pair reached clutch completion, i.e., two eggs. Molecular analyses were conducted at Simon Fraser University following standard PCR protocols, and stable isotope analyses were conducted at the Stable Isotope Facility at the University of California, Davis using an elemental analyzer interfaced with an isotope ratio mass spectrometer"</span><span class="op">)</span></span></code></pre></div>
<p><strong>countryCode</strong> is the two letter standard (using ISO
3166-1-alpha-2) code for a country. Antarctica, defined as the
territories south of 60°S is given the code AQ.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span> <span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>countryCode<span class="op">=</span><span class="st">"AQ"</span>,</span>
<span>         country<span class="op">=</span><span class="st">"Antarctica"</span><span class="op">)</span></span></code></pre></div>
<p>The <strong>locationID</strong> can be a global unique identifier or
an identifier specific to the data set. We have the region and island
for the penguins data so we can use these to develop a data specific
identifier.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>locationID<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">region</span>, <span class="st">"_"</span>, <span class="va">island</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We are not provided with precise coordinates
(<strong>decimalLatitude</strong>, <strong>decimalLongitude</strong>)
for the samples in the penguin data. However, we can get the centroid
for each island; Torgersen is at -64.77308, -64.07413; Biscoe is at
-65.4333316 -65.499998; and Dream is at -64.7333333, -64.2333333. The
<strong>geodeticDatum</strong> is WGS 84 (this is the default assumed by
GBIF if you do not add this field explicitly).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>decimalLatitude<span class="op">=</span> </span>
<span>           <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>             <span class="va">island</span><span class="op">==</span><span class="st">"Torgersen"</span><span class="op">~</span><span class="op">-</span><span class="fl">64.77308</span>,</span>
<span>             <span class="va">island</span><span class="op">==</span><span class="st">"Biscoe"</span><span class="op">~</span><span class="op">-</span><span class="fl">65.4333316</span>,</span>
<span>             <span class="va">island</span><span class="op">==</span><span class="st">"Dream"</span><span class="op">~</span><span class="op">-</span><span class="fl">64.7333333</span>,</span>
<span>             <span class="cn">TRUE</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>decimalLongitude<span class="op">=</span> </span>
<span>           <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>             <span class="va">island</span><span class="op">==</span><span class="st">"Torgersen"</span><span class="op">~</span><span class="op">-</span><span class="fl">64.07413</span>,</span>
<span>             <span class="va">island</span><span class="op">==</span><span class="st">"Biscoe"</span><span class="op">~</span><span class="op">-</span><span class="fl">65.499998</span>,</span>
<span>             <span class="va">island</span><span class="op">==</span><span class="st">"Dream"</span><span class="op">~</span><span class="op">-</span><span class="fl">64.2333333</span>,</span>
<span>             <span class="cn">TRUE</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span>    </span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>geodeticDatum<span class="op">=</span><span class="st">"WGS 84"</span><span class="op">)</span></span></code></pre></div>
<p>As the coordinates are just the centroid for the island we need to
include some measure of uncertainty
(<strong>coordinateUncertaintyInMeters</strong>). We can guess the
uncertainity by looking at the size of the islands. Torgersen is 400 m
wide; Biscoe is around 500m wide and Dream is also around 400 m
wide.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>coordinateUncertaintyInMeters<span class="op">=</span> </span>
<span>           <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>             <span class="va">island</span><span class="op">==</span><span class="st">"Torgersen"</span><span class="op">~</span><span class="fl">400</span>,</span>
<span>             <span class="va">island</span><span class="op">==</span><span class="st">"Biscoe"</span><span class="op">~</span><span class="fl">500</span>,</span>
<span>             <span class="va">island</span><span class="op">==</span><span class="st">"Dream"</span><span class="op">~</span><span class="fl">400</span>,</span>
<span>             <span class="cn">TRUE</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Finally, we can create the Event core by selecting those elements
that we have listed above.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eventDF</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"datasetName"</span>,</span>
<span>           <span class="st">"ownerInstitutionCode"</span>,</span>
<span>           <span class="st">"parentEventID"</span>,</span>
<span>           <span class="st">"eventID"</span>,</span>
<span>           <span class="st">"samplingProtocol"</span>,</span>
<span>           <span class="st">"sampleSizeValue"</span>,</span>
<span>           <span class="st">"sampleSizeUnit"</span>,</span>
<span>           <span class="st">"eventDate"</span>,</span>
<span>           <span class="st">"year"</span>,</span>
<span>           <span class="st">"month"</span>,</span>
<span>           <span class="st">"day"</span>,</span>
<span>           <span class="st">"locationID"</span>,</span>
<span>           <span class="st">"country"</span>,</span>
<span>           <span class="st">"countryCode"</span>,</span>
<span>           <span class="st">"decimalLatitude"</span>,</span>
<span>           <span class="st">"decimalLongitude"</span>,</span>
<span>           <span class="st">"geodeticDatum"</span>,</span>
<span>           <span class="st">"coordinateUncertaintyInMeters"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then we need to add in the Parent Events in to the Event
dataframe.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eventDF</span><span class="op">=</span><span class="va">eventDF</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>continent<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>islandGroup<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eventDate<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">eventDate</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">parent_penguinEvent</span><span class="op">)</span></span></code></pre></div>
<p>The final stage is to initialise an event object in the
{livingNorwayR} package - this will be used later to build the Darwin
Core compliant data package.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GBIF_Event</span><span class="op">=</span><span class="fu"><a href="../reference/initializeGBIFEvent.html">initializeGBIFEvent</a></span><span class="op">(</span><span class="va">eventDF</span>, idColumnInfo <span class="op">=</span> <span class="st">"eventID"</span>, nameAutoMap <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="the-occurrence-extension">The Occurrence extension<a class="anchor" aria-label="anchor" href="#the-occurrence-extension"></a>
</h2>
<p>We can find the supported terms for the Occurrence extension by using
the following function.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/getGBIFOccurrenceMembers.html">getGBIFOccurrenceMembers</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="co">#Truncated</span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/type`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/type - Type (DEPRECATED)</span></span>
<span><span class="co">#&gt; The nature or genre of the resource.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/type</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2008-01-14</span></span>
<span><span class="co">#&gt;  Is replaced by: http://purl.org/dc/elements/1.1/type</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      To provide a string literal value for type, use dc:type rather than this term. In accordance with the Darwin Core RDF guide, rdf:type should be used instead of this term to indicate an IRI value for type.</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2009-12-07_1</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2019-12-01_19</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2019-12-01_20</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      This term is deprecated and should no longer be used.</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/modified`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/modified - Date Modified</span></span>
<span><span class="co">#&gt; The most recent date-time on which the resource was changed.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/modified</span></span>
<span><span class="co">#&gt;  Version IRI: http://dublincore.org/usage/terms/history/#modified-003</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2020-08-12</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      Recommended best practice is to use a date that conforms to ISO 8601-1:2019.</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2019-12-01_19</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      1963-03-08T14:07-0600 (8 Mar 1963 at 2:07pm in the time zone six hours earlier than UTC). 2009-02-20T08:40Z (20 February 2009 8:40am UTC). 2018-08-29T15:19 (3:19pm local time on 29 August 2018). 1809-02-12 (some time during 12 February 1809). 1906-06 (some time in June 1906). 1971 (some time in the year 1971). 2007-03-01T13:00:00Z/2008-05-11T15:30:00Z (some time during the interval between 1 March 2007 1pm UTC and 11 May 2008 3:30pm UTC). 1900/1909 (some time during the interval between the beginning of the year 1900 and the end of the year 1909). 2007-11-13/15 (some time in the interval between 13 November 2007 and 15 November 2007).</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/language`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/language - Language</span></span>
<span><span class="co">#&gt; A language of the resource.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/language</span></span>
<span><span class="co">#&gt;  Version IRI: http://dublincore.org/usage/terms/history/#languageT-001</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2008-01-14</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      Recommended best practice is to use an IRI from the Library of Congress ISO 639-2 scheme http://id.loc.gov/vocabulary/iso639-2</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2019-12-01_19</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/license`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/license - License</span></span>
<span><span class="co">#&gt; A legal document giving official permission to do something with the resource.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/license</span></span>
<span><span class="co">#&gt;  Version IRI: http://dublincore.org/usage/terms/history/#license-002</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2008-01-14</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2014-11-06_17</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      http://creativecommons.org/publicdomain/zero/1.0/legalcode, http://creativecommons.org/licenses/by/4.0/legalcode</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/rightsHolder`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/rightsHolder - Rights Holder</span></span>
<span><span class="co">#&gt; A person or organization owning or managing rights over the resource.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/rightsHolder</span></span>
<span><span class="co">#&gt;  Version IRI: http://dublincore.org/usage/terms/history/#rightsHolder-002</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2008-01-14</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      The Regents of the University of California</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`http://purl.org/dc/terms/accessRights`</span></span>
<span><span class="co">#&gt; http://purl.org/dc/terms/accessRights - Access Rights</span></span>
<span><span class="co">#&gt; Information about who can access the resource or an indication of its security status.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://purl.org/dc/terms/accessRights</span></span>
<span><span class="co">#&gt;  Version IRI: http://dublincore.org/usage/terms/history/#accessRights-002</span></span>
<span><span class="co">#&gt;  Type: Property</span></span>
<span><span class="co">#&gt;  Date modified: 2008-01-14</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      Access Rights may include information regarding access or restrictions based on privacy, security, or other policies.</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      not-for-profit use only, https://www.fieldmuseum.org/field-museum-natural-history-conditions-and-suggested-norms-use-collections-data-and-images</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      not in ABCD</span></span></code></pre></div>
<p>GBIF also has a list of required and recommended terms for Occurrence
data (<a href="https://www.gbif.org/data-quality-requirements-occurrences" class="external-link uri">https://www.gbif.org/data-quality-requirements-occurrences</a>).
The required terms are <strong>occurrenceID</strong>,
<strong>basisOfRecord</strong>,<strong>scientificName</strong>,
<strong>eventDate</strong> (included in the event core). The recommended
terms include <strong>countryCode</strong>,
<strong>taxonRank</strong>,<strong>kingdom</strong>,
<strong>decimalLatitude</strong>, <strong>decimalLongitude</strong>,
<strong>geodeticDatum</strong>,
<strong>coordinateUncertaintyInMeters</strong>,<strong>individualCount</strong>,
<strong>organismQuantity</strong> and
<strong>organismQuantityType</strong>, some of which are included in the
event core.</p>
<p>We will also add some more information including
<strong>type</strong>, <strong>collectionCode</strong>,
<strong>organismQuantity</strong>,
<strong>organismQuantityType</strong>, <strong>phylum</strong>,
<strong>class</strong>, <strong>order</strong>, <strong>family</strong>,
<strong>genus</strong>, <strong>vernacularName</strong> and
<strong>sex</strong>.</p>
<p>The <strong>type</strong> is an “Occurrence”. The
<strong>collectionCode</strong> can be “Palmer Station Antarctica LTER”
and the <strong>occurrenceID</strong> should be a globally unique
identifier.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>type<span class="op">=</span><span class="st">"Occurrence"</span>,</span>
<span>    collectionCode<span class="op">=</span><span class="st">"Palmer Station Antarctica LTER"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>occurrenceID<span class="op">=</span><span class="fu">uuid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/uuid/man/UUIDgenerate.html" class="external-link">UUIDgenerate</a></span><span class="op">(</span>use.time <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The <strong>basisOfRecord</strong> records how the observation was
made (e.g. <strong>PreservedSpecimen</strong>,
<strong>FossilSpecimen</strong>, <strong>LivingSpecimen</strong>,
<strong>MaterialSample</strong>, <strong>Event</strong>,
<strong>HumanObservation</strong>, <strong>MachineObservation</strong>,
etc.)</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>basisOfRecord<span class="op">=</span><span class="st">"HumanObservation"</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
<p><strong>organismQuantity</strong> and
<strong>organismQuantityType</strong>, are 1 individual penguin.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>organismQuantity<span class="op">=</span> <span class="fl">1</span>,</span>
<span>         organismQuantityType<span class="op">=</span> <span class="st">"individual"</span><span class="op">)</span></span></code></pre></div>
<p>For the <strong>scientificName</strong> and
<strong>vernacularName</strong> we can use the species name from the
original data set.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>scientificName<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"[\\(\\)]"</span>, <span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/regmatches.html" class="external-link">regmatches</a></span><span class="op">(</span><span class="va">species</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gregexpr</a></span><span class="op">(</span><span class="st">"\\(.*?\\)"</span>,<span class="va">species</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>         vernacularName<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"\\s*\\([^\\)]+\\)"</span>,<span class="st">""</span>,<span class="va">species</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>taxonRank</strong>, <strong>kingdom</strong>,
<strong>phylum</strong>, <strong>class</strong>, <strong>order</strong>,
<strong>family</strong> and <strong>genus</strong> all relate to the
scientific name of the species. The <strong>taxonRank</strong> will be
<strong>species</strong> because we have identified the penguins to the
species level.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_data</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>kingdom<span class="op">=</span><span class="st">"Animalia"</span>,</span>
<span>         phylum<span class="op">=</span><span class="st">"Chordata"</span>,</span>
<span>         class<span class="op">=</span><span class="st">"Aves"</span>,</span>
<span>         order<span class="op">=</span> <span class="st">"Sphenisciformes"</span>,</span>
<span>         family<span class="op">=</span> <span class="st">"Spheniscidae"</span>,</span>
<span>         genus<span class="op">=</span><span class="st">"Pygoscelis"</span>,</span>
<span>         <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>taxonRank<span class="op">=</span><span class="st">"species"</span><span class="op">)</span></span></code></pre></div>
<p>Finally, as we did with the Event core, we can create the occurrence
extension by selecting those elements that we have listed above and
create a {livingNorwayR} object.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">occ_ext</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">type</span>,<span class="va">collectionCode</span>,<span class="va">basisOfRecord</span>,<span class="va">occurrenceID</span>, <span class="va">organismQuantity</span>, <span class="va">organismQuantityType</span>, </span>
<span>         <span class="va">eventID</span>, <span class="va">eventDate</span>, <span class="va">scientificName</span>,<span class="va">kingdom</span>, <span class="va">phylum</span>, <span class="va">class</span>, <span class="va">order</span>, <span class="va">family</span>, <span class="va">genus</span>,<span class="va">vernacularName</span>,<span class="va">taxonRank</span>, <span class="va">sex</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GBIF_Occ</span><span class="op">=</span><span class="fu"><a href="../reference/initializeGBIFOccurrence.html">initializeGBIFOccurrence</a></span><span class="op">(</span><span class="va">occ_ext</span>, idColumnInfo <span class="op">=</span> <span class="st">"occurrenceID"</span>,nameAutoMap <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-measurement-or-fact-extension">The Measurement or Fact extension<a class="anchor" aria-label="anchor" href="#the-measurement-or-fact-extension"></a>
</h2>
<p>Our final extension is the “Measurement or Fact extension”. We can
look at the definition of this extension using the following code:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/getGBIFExtensionClasses.html">getGBIFExtensionClasses</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">GBIFMeasurementOrFact</span></span>
<span><span class="co">#&gt; http://rs.tdwg.org/dwc/terms/MeasurementOrFact - Measurement or Fact</span></span>
<span><span class="co">#&gt; A measurement of or fact about an rdfs:Resource (http://www.w3.org/2000/01/rdf-schema#Resource).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Defined in: https://dwc.tdwg.org/</span></span>
<span><span class="co">#&gt;  IRI: http://rs.tdwg.org/dwc/terms/MeasurementOrFact</span></span>
<span><span class="co">#&gt;  Version IRI: http://rs.tdwg.org/dwc/terms/version/MeasurementOrFact-2018-09-06</span></span>
<span><span class="co">#&gt;  Type: Class</span></span>
<span><span class="co">#&gt;  Date modified: 2018-09-06</span></span>
<span><span class="co">#&gt;  Notes:</span></span>
<span><span class="co">#&gt;      Resources can be thought of as identifiable records or instances of classes and may include, but need not be limited to dwc:Occurrence, dwc:Organism, dwc:MaterialSample, dwc:Event, dwc:Location, dwc:GeologicalContext, dwc:Identification, or dwc:Taxon.</span></span>
<span><span class="co">#&gt;  Executive committee decisions:</span></span>
<span><span class="co">#&gt;      http://rs.tdwg.org/decisions/decision-2014-10-26_15</span></span>
<span><span class="co">#&gt;  Examples:</span></span>
<span><span class="co">#&gt;      The weight of an organism in grams. The number of placental scars. Surface water temperature in Celsius.</span></span>
<span><span class="co">#&gt;  Miscellaneous information:</span></span>
<span><span class="co">#&gt;      Datasets/Dataset/Units/Unit/MeasurementsOrFacts or DataSets/DataSet/Units/Unit/Gathering/SiteMeasurementsOrFacts</span></span></code></pre></div>
<p>GBIF has a list of properties for this extension (<a href="https://tools.gbif.org/dwca-validator/extension.do?id=dwc:MeasurementOrFact" class="external-link uri">https://tools.gbif.org/dwca-validator/extension.do?id=dwc:MeasurementOrFact</a>).
These include <strong>measurementID</strong>
<strong>measurementType</strong>, <strong>measurementValue</strong>,
<strong>measurementAccuracy</strong>, <strong>measurementUnit</strong>,
<strong>measurementDeterminedDate</strong>,
<strong>measurementDeterminedBy</strong>,
<strong>measurementMethod</strong> and
<strong>measurementRemarks</strong>, none of which are required.</p>
<p>Let’s start with the <strong>measurementID</strong>. We should also
include the <strong>occurrenceID</strong> and <strong>eventID</strong>
so that we know which individual and in which sampling event the
measurements were taken.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">M_or_f</span><span class="op">=</span><span class="va">penguin_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>measurementID<span class="op">=</span><span class="fu">uuid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/uuid/man/UUIDgenerate.html" class="external-link">UUIDgenerate</a></span><span class="op">(</span>use.time <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>There are a number of measurements that we can include in this
extension.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">M_or_f</span><span class="op">=</span><span class="va">M_or_f</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">measurementID</span>,<span class="va">parentEventID</span>,<span class="va">occurrenceID</span>,<span class="va">eventID</span>,</span>
<span>         <span class="va">culmen_length_mm</span>, <span class="va">culmen_depth_mm</span>, <span class="va">delta_13_c_o_oo</span>, <span class="va">delta_15_n_o_oo</span>, <span class="va">body_mass_g</span>, <span class="va">flipper_length_mm</span><span class="op">)</span></span></code></pre></div>
<p>We need to pivot the data so that all the measurement types go in to
a single column called <strong>measurementType</strong>. All the
measurements go in to a column called
<strong>measurementValue</strong>.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">M_or_f</span><span class="op">=</span><span class="va">M_or_f</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">culmen_length_mm</span>, <span class="va">culmen_depth_mm</span>, <span class="va">delta_13_c_o_oo</span>, <span class="va">delta_15_n_o_oo</span>, <span class="va">body_mass_g</span>, <span class="va">flipper_length_mm</span><span class="op">)</span>, names_to<span class="op">=</span><span class="st">"measurementType"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"measurementValue"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">measurementValue</span><span class="op">)</span></span></code></pre></div>
<p>Finally we create a measurement or fact object using
{livingNorwayR}.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GBIF_Measure</span><span class="op">=</span><span class="fu"><a href="../reference/initializeGBIFMeasurementOrFact.html">initializeGBIFMeasurementOrFact</a></span><span class="op">(</span><span class="va">M_or_f</span>, idColumnInfo <span class="op">=</span> <span class="st">"measurementID"</span>, nameAutoMap <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>The next step is to write the metadata for the data. We can do this
using the {LivingNorwayR} package and in the next tutorial we will show
you how to do this (LINK TO PART TWO) and how to bring it all together
in to a data package.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-LivingNorwayR" class="csl-entry">
Chipperfield, Joseph, Matthew Grainger, and Erlend Nilsen. 2022.
<em>LivingNorwayR: Creates a Darwin Core Standard Compliant Data Archive
("a Data Package") for Biodiversity Data</em>. <a href="https://doi.org/10.5281/zenodo.6418208" class="external-link">https://doi.org/10.5281/zenodo.6418208</a>.
</div>
<div id="ref-palmer" class="csl-entry">
Horst, Allison Marie, Alison Presmanes Hill, and Kristen B Gorman. 2020.
<em>Palmerpenguins: Palmer Archipelago (Antarctica) Penguin Data</em>.
<a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">https://allisonhorst.github.io/palmerpenguins/</a>.
</div>
<div id="ref-R" class="csl-entry">
R Core Team. 2020. <em>R: A Language and Environment for Statistical
Computing</em>. Vienna, Austria: R Foundation for Statistical Computing.
<a href="https://www.R-project.org/" class="external-link">https://www.R-project.org/</a>.
</div>
<div id="ref-uuid" class="csl-entry">
Urbanek, Simon, and Theodore Ts’o. 2021. <em>Uuid: Tools for Generating
and Handling of UUIDs</em>. <a href="https://CRAN.R-project.org/package=uuid" class="external-link">https://CRAN.R-project.org/package=uuid</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Joseph Chipperfield, Matthew Grainger, Erlend Nilsen, Norsk institutt for naturforskning (NINA).</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
